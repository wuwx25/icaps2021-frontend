<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/png" href="../../assets/images/favicon.png" />
    <title>ICAPS 2021</title>

    <!-- Bootstrap core CSS -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous"> -->


    <!-- Bootstrap Overrides -->
    <link href="../../assets/bootstrap/css/styles.css" rel="stylesheet" />
    <link href="../../assets/css/custom.css" rel="stylesheet" />

    <!-- jQuery -->
    <script src="../../assets/js/jquery-3.6.0.min.js"></script>
    <script src="../../assets/js/custom.js"></script>
    <script src="../../assets/js/bootstrap.min.js"></script>
    <!-- import axios  -->
    <script src="../../assets/js/axios.min.js"></script>
</head>

<body>

    <div id='icaps-header' v-cloak>
        <myheader></myheader>
    </div>
    <div id="app" v-cloak>
            <div class="container" style="min-height: 68vh" >
            <div class="album mt-3 p-4" style="min-height:80vh">
                <div style="height: 100px" class="d-none d-md-block">
                    <!-- padding hack for the fixed navbar -->
                </div>

                <div class="col-xs-12 col-sm-9">

                    <h3 class="topHeading">Password Reset </h3>
                    <div v-if="!isSuccess">
                        <p>To reset or your password, please enter the email
                            address you use to login. We will send a password reset email to you, which contain a
                            verification code .
                            After you've got the code, you can reset your password by inputting the verification code
                            and your new password.
                            We cannot recover a password; we can only reset one.</p>


                        <p><label>Email:</label>
                            <div class="mb-3">
                                <input type="text" class="form-control" :class="{warn:!isEmail}"
                                    placeholder="Input your email" v-model="user.email">
                                <small style="color: red; " v-if="!isEmail">
                                    <ul style="margin-top: 0.5em;">
                                        <li>Email is not valid</li>
                                    </ul>
                                </small>
                            </div>
                        </p>

                        <button class="btn btn-primary" @click="submit">Submit</button>
                    </div>
                    <div v-else>
                        <p>You have already reset your password! You can try to login with your new password.</p>
                    </div>
                </div>
                <div class="modal fade " id="verifyCode" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <p class="modal-title" id="exampleModalLabel"
                                    style="text-align: justify;font-size: small;font-weight: lighter">We have sent an
                                    email to your email.Please input the verification code you received in the box below
                                </p>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label class="form-label" style="margin: 1em 0 0.5em 0.8em">Verification
                                        Code</label>
                                    <input type="text" class="form-control" :class="{warn:!isCode}" v-model="user.code">
                                    <small style="color: red" v-if="!isErrorCode">
                                        <ul style="margin-top: 0.5em;">
                                            <li>Error verification code</li>
                                        </ul>
                                    </small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" style="margin: 1em 0 0.5em 0.8em">New Password</label>
                                    <input type="password" class="form-control" v-model="user.password">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" style="margin: 1em 0 0.5em 0.8em">Confirm Password</label>
                                    <input type="password" class="form-control" v-model="confirmPassword">
                                    <small style="color: red" v-if="user.password != confirmPassword">
                                        <ul style="margin-top: 0.5em;">
                                            <li>Mismatch</li>
                                        </ul>
                                    </small>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" @click="passwordReset">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal" tabindex="-1" id='tips'>
            <div class="modal-dialog ">
                <div class="modal-content">
                    <div class="modal-body" style="background-color: rgb(231, 241, 255);">
                        <p style="text-align: center;font-size: larger;color: rgb(12, 99, 228);">
                            {{modalmsg}}</p>
                    </div>
                </div>
            </div>
        </div>


        <footer class="footer m-5">
            <div class="container">
                <hr />
                <div class="row d-flex justify-content-center">
                    <div class="col col-12 col-lg-2 d-flex justify-content-center mb-2">
                        &copy; ICAPS 2021
                    </div>
                    <div class="col col-12 col-lg-2 d-flex justify-content-center mb-1">
                        <a href="../../privacy-policy.html">Privacy Policy</a>
                    </div>
                    <div class="col col-12 col-lg-2 d-flex justify-content-center mb-1">
                        <a href="../../terms-of-use.html">Terms of Use</a>
                    </div>
                    <div class="col col-12 col-lg-2 d-flex justify-content-center">
                        <a href="../../code-of-conduct.html">Code of Conduct</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</body>
<script src="./index.js" type="module"></script>

</html>
<style type="text/css">
    .warn {
        border-style: solid;
        border-color: red;
    }
    [v-cloak]{
        display: none;
    }
</style>